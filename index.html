<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Correction Checklist</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <h1>Document Correction Checklist</h1>

  <form id="correctionForm">
    <label>Case Link (via MyCase):</label><br>
    <input type="url" name="case_link"><br><br>

    <label>Reviewed On:</label><br>
    <input type="date" name="reviewed_on"><br><br>

    <label>Return By:</label><br>
    <input type="date" name="return_by"><br><br>

    <label>Reviewer Attorney Name:</label><br>
    <input type="text" name="reviewer_name"><br><br>

    <label>Primary Responsible for Corrections:</label><br>
    <select name="correction_responsible">
      <option value=""></option>
      <option>√çsis Almeida Silva</option>
      <option>Naiara Daher</option>
      <option>Sandra Moser</option>
    </select><br><br>

    <label>Case Manager:</label><br>
    <select name="case_manager">
      <option value=""></option>
      <option>Fabiana Nascimento</option>
      <option>Isis A. Silva</option>
      <option>Lucas Franco</option>
      <option>Myrelle Sinder</option>
      <option>Mylena Rodrigues</option>
      <option>Paola Fantinatti</option>
      <option>Pedro Hartmann</option>
    </select><br><br>

    <label>Document Reviewed:</label><br>
    <select name="document_reviewed">
      <option value=""></option>
      <option>Cover Letter</option>
      <option>Final Package</option>
      <option>Form</option>
    </select><br><br>

    <label>Document Version Link:</label><br>
    <input type="url" name="document_version"><br><br>

    <h3>Correction Item</h3>
    <label>Error Description:</label><br>
    <textarea name="error_description"></textarea><br><br>

    <label>Error Page:</label><br>
    <input type="text" name="error_page"><br><br>

    <label>Error Paragraph:</label><br>
    <input type="text" name="error_paragraph"><br><br>

    <h3>Error Type:</h3>
    <input type="checkbox" name="error_type" value="Graphical"> Graphical<br>
    <input type="checkbox" name="error_type" value="Formatting"> Formatting<br>
    <input type="checkbox" name="error_type" value="Technical"> Technical<br>
    <input type="text" name="error_other" placeholder="Other"><br><br>

    <label>Expected Correction:</label><br>
    <textarea name="expected_correction"></textarea><br><br>

    <h3>After Review</h3>
    <input type="radio" name="status" value="Fully addressed"> Fully addressed<br>
    <input type="radio" name="status" value="Partially addressed"> Partially addressed<br>
    <input type="radio" name="status" value="Not addressed"> Not addressed<br><br>

    <label>If partially or not addressed, what was missing?</label><br>
    <textarea name="missing_details"></textarea><br><br>

    <button type="button" onclick="generatePDF()">Save as PDF</button>
  </form>

  <script>
    async function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const form = document.getElementById('correctionForm');
      const formData = new FormData(form);
      let y = 10;

      doc.setFontSize(12);
      doc.text("Document Correction Checklist", 10, y);
      y += 10;

      for (const [name, value] of formData.entries()) {
        if (value.trim() !== "") {
          const label = name.replace(/_/g, " ").replace(/\b\w/g, l => l.toUpperCase());
          doc.text(`${label}: ${value}`, 10, y);
          y += 10;
          if (y > 280) {
            doc.addPage();
            y = 10;
          }
        }
      }

      doc.save("correction_form.pdf");
    }
  </script>
</body>
</html>
